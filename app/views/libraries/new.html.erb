<% title "Add Library" -%>

<%= form_for(@library, :html => { class: "form" }) do |f| %>

  <%= render :partial => 'shared/form_header',
    :locals => {:title => 'Add Library', :cancel_path => libraries_path} %>

  <%= render :partial => 'form_contents', :locals => {:f => f} %>

  <div class="form__footer">
    <%= f.submit "Add", class: 'btn btn--primary' %>
  </div>

<% end %>

<% if @page and not @library.id -%>
<%= form_for(@page_element, :url => page_elements_path(@page, @page_element),
  :html => { class: "form" }) do |f| %>

  <%= render :partial => 'shared/form_header',
    :locals => {:title => 'Attach Library'} %>

  <div class="form__contents">

    <fieldset>
      <ul class="form__fields list-bare">
        <%= f.hidden_field :page_id %>
        <%= f.hidden_field :element_type %>
        <li class="form__field">
          <%= f.label :library %>
          <%= f.select :element_id,
            options_from_collection_for_select(@libraries,
              :id, :name, @library ? @library.id : nil),
            {include_blank: true} %>
        </li>
      </ul>
    </fieldset>
  </div>

  <div class="form__footer">
    <%= f.submit "Attach", class: 'btn btn--primary' %>
  </div>
<% end %>
<% end -%>
