$(function() {
  <% if @page -%>
  $('#choose_page_id').flexbox(
    '<%= search_pages_path(:format => :js) %>', {
    initialDisplayValue: '<%= escape_javascript(@page.name) %>',
    initialHiddenValue: '<%= @page.id %>',
    width: 170,
    maxCacheBytes: 0,
    paging: {
      pageSize: 5
    }
  });
  <% end -%>
  
  function alignPaymentMethodControls() {
    if ($('#form_payable')[0].checked) {
      $('.payment_method').show();
    } else {
      $('.payment_method').hide();
    }
  }
  
  $('#form_payable').change(alignPaymentMethodControls);
  alignPaymentMethodControls();
});
