$(function() {
  $('.filled_forms input[type="checkbox"]').click(function () {
    var amount = parseInt($('#payment_amount').text(), 10),
      change = parseInt($(this).attr('data-amount'), 10);
    if ($(this).attr('checked')) {
      $('#payment_amount').text(amount + change);
      $('#hidden_payment_amount').val(amount + change);
    } else {
      $('#payment_amount').text(amount - change);
      $('#hidden_payment_amount').val(amount - change);
    }
  });
  $('#choose_paypal').click(function (ev) {
    $('#busy_overlay').show();
    $("#denote_paypal").
      bind("ajax:success", function() {
        // submit to paypal
        $('#paypal_form').submit();
      }).
      submit();
    ev.preventDefault();
  });
  $('#payment_submit').click(function () {
    $('#busy_overlay').show();
  });
});
